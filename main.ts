function Kemilalier () {
    for (let index = 0; index < 1; index++) {
        pause(2000)
        while (tilfældigkemi == nykemi) {
            nykemi = randint(1, 6)
        }
        tilfældigkemi = nykemi
        if (nykemi == 1) {
            kemi_1 = sprites.create(assets.image`myImage`, SpriteKind.Enemy)
        } else if (nykemi == 2) {
            kemi_1 = sprites.create(assets.image`myImage0`, SpriteKind.Enemy)
        } else if (nykemi == 3) {
            kemi_1 = sprites.create(assets.image`myImage1`, SpriteKind.Enemy)
        } else if (nykemi == 4) {
            kemi_1 = sprites.create(assets.image`myImage2`, SpriteKind.Enemy)
        } else if (nykemi == 5) {
            kemi_1 = sprites.create(assets.image`myImage3`, SpriteKind.Enemy)
        } else if (nykemi == 6) {
            kemi_1 = sprites.create(assets.image`myImage5`, SpriteKind.Enemy)
        }
    }
    for (let index = 0; index < 1; index++) {
        if (info.score() >= 27) {
            Cleanup_EnemySprites2()
        }
        kemi_1.setPosition(70, 63)
        kemi_1.setVelocity(randint(-40, 40), randint(30, 70))
    }
}
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    startmode = false
    SpilA()
})
function Cleanup_EnemySprites () {
    GameAstarted = false
    sprites.destroyAllSpritesOfKind(SpriteKind.Player)
    sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
    sprites.destroyAllSpritesOfKind(SpriteKind.Projectile)
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    Spiller.setVelocity(-65, 0)
})
info.onScore(28, function () {
    Cleanup_EnemySprites()
    scene.setBackgroundImage(img`
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        ................................................................................................................................................................
        `)
    effects.confetti.endScreenEffect()
    game.showLongText("Tillykke du har nu hjulpet med at rengøre vandet, fra de farlige kamikalier.", DialogLayout.Full)
})
function SpilA () {
    Spiller = sprites.create(img`
        . . . . . f f f f . . . . . 
        . . . f f 5 5 5 5 f f . . . 
        . . f d 5 5 5 5 5 5 d f . . 
        . f d 5 5 5 5 5 5 5 5 d f . 
        . f 5 5 5 5 5 5 5 5 5 5 f . 
        f b 5 5 5 5 5 5 5 5 5 5 b f 
        f b 5 5 5 5 5 5 5 5 5 5 b f 
        f b b 5 5 5 5 5 5 5 5 b b f 
        f b b b d 5 5 5 5 d b b b f 
        f b b b b b b b b b b b b f 
        f f b b b b b b b b b b f . 
        . c c b b b b b b b b c c . 
        . 4 d c f f f f f f c d 4 . 
        . 4 f b 3 b 3 b 3 b b f 4 . 
        . . f f 3 b 3 b 3 b f f . . 
        . . . . f f b b f f . . . . 
        `, SpriteKind.Player)
    Spiller.setPosition(81, 113)
    Spiller.setStayInScreen(true)
    scene.setBackgroundImage(assets.image`Baggrund 2`)
    game.splash("Hej vi får brug for din hjælp til at fjerne de farlige kemikalier fra vandet")
    pause(2000)
    GameAstarted = true
    information = true
    info.setLife(3)
    while (GameAstarted == true) {
        while (information == true) {
            scene.setBackgroundImage(assets.image`Baggrund 2`)
            tiles.setCurrentTilemap(tilemap`level8`)
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 3`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 4`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 5`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 6`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 7`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            pause(1000)
            scene.setBackgroundImage(assets.image`Baggrund 8`)
            tiles.setCurrentTilemap(tilemap`level8`)
            Kemilalier()
            if (info.score() >= 27) {
                Cleanup_EnemySprites()
            }
        }
    }
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    Spiller.setVelocity(65, 0)
})
scene.onOverlapTile(SpriteKind.Enemy, assets.tile`myTile0`, function (sprite, location) {
    sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
    info.changeLifeBy(-1)
    if (info.life() == 0) {
        game.gameOver(false)
        game.splash("Du vandt desværre ikke, men forsøg igen.")
    }
})
function Cleanup_EnemySprites2 () {
    GameAstarted = false
    sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
}
info.onScore(27, function () {
    for (let index = 0; index < 1; index++) {
        GameAstarted = false
        Cleanup_EnemySprites()
        scene.setBackgroundImage(assets.image`Baggrund 9`)
        Spiller.setPosition(152, 106)
        Followsprite = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, Spiller, -27, -24)
        Spiller.follow(Followsprite)
        pause(2200)
    }
    info.changeScoreBy(1)
})
info.onScore(5, function () {
    information = false
    while (information == false) {
        sprites.destroyAllSpritesOfKind(SpriteKind.Enemy)
        story.printCharacterText("Vidste du at tekstil produktion anslås til at være ansvarlig for 20% af den globale vandforurening.  ")
        information = true
    }
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    sprites.destroy(kemi_1, effects.hearts, 200)
    info.changeScoreBy(1)
})
let Followsprite: Sprite = null
let information = false
let Spiller: Sprite = null
let GameAstarted = false
let kemi_1: Sprite = null
let nykemi = 0
let tilfældigkemi = 0
let nybaggrund = 0
let tilfældigbaggrund = 0
let startmode = false
scene.setBackgroundImage(assets.image`Gamestart`)
startmode = true
while (startmode) {
    pause(500)
    while (tilfældigbaggrund == nybaggrund) {
        nybaggrund = randint(1, 3)
    }
    tilfældigbaggrund = nybaggrund
    if (tilfældigbaggrund == 1) {
        scene.setBackgroundImage(assets.image`Gamestart`)
    } else if (tilfældigbaggrund == 2) {
        scene.setBackgroundImage(assets.image`Gamestart0`)
    } else if (tilfældigbaggrund == 3) {
        scene.setBackgroundImage(assets.image`Gamestart1`)
    }
}
